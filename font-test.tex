\documentclass[12pt,a4paper]{article}

\frenchspacing

\usepackage[libertine]{newtxmath}
%\usepackage[charter]{mathdesign}

\usepackage{ifxetex}
\ifxetex

 \usepackage{fontspec}
%  \setmainfont[Scale=0.95,Ligatures={TeX,Common}]{Charis SIL}
%   \setmainfont[Ligatures={TeX,Common},Numbers={OldStyle}]{Linux Libertine B}
 \setmainfont[Ligatures={TeX,Common}]{FreeSerif}


    \usepackage{unicode-math}
    \setmathfont{TG Termes Math}

   \setsansfont[Ligatures={TeX,Common},Scale=MatchLowercase]{FreeSans}
   \setmonofont[Ligatures={TeX},Scale=MatchLowercase]{FreeMono}

   \usepackage{polyglossia}

   
   \setdefaultlanguage{british}
 \else
 \usepackage{times}
 \usepackage{ucs}
 \usepackage{textcomp}
 \usepackage[utf8x]{inputenc}

 \usepackage[T1]{fontenc}
 \usepackage[british]{babel} 
\fi

\usepackage[margin=1in]{geometry}
\usepackage{microtype}
\usepackage{pst-tree}

%\usepackage[OT1]{fontenc}
%\usepackage{tipa}
%\usepackage{array}

\newcommand{\DIM}[1]{\uppercase{#1}}
\newcommand{\DIMBOX}[1]{\fbox{\DIM{#1}}}

\usepackage{natbib}
\usepackage{babel}
\usepackage{booktabs}

\usepackage{graphicx}

\usepackage{avm} % Included: avm.sty, gb4e.sty w/o active chars,
                        % extensions for bibliography

\usepackage{gb4e}
\noautomath

\usepackage{bidi}


\avmoptions{center}
\avmfont{\small\sc}
\avmvalfont{\small\it}
\avmsortfont{\small\it}

\newcommand{\rr}[3]{%
  \avmoptions{center}
  \begin{avm}
    \[mud & \@1 \{ #1 \}\\
    morsyn & \@1 $\cup$ \{ #2 \}\\
    morphs & \< \rm #3 \>\]
  \end{avm}
}



\title{Unicode font challenges in linguistics}

 \author{Berthold Crysmann\\[1ex]
   Laboratoire de linguistique formelle\\
 \texttt{crysmann@linguist.jussieu.fr}}

\date{}

\bibliographystyle{OUP-ling}

\pagestyle{myheadings}


\begin{document}

\maketitle

\section{Scripts}

\begin{sloppypar}
  In linguistics, we need support for various scripts, ideally
  covering the whole of unicode. While scripts from different
  traditions may follow entirely different design principles (compare
  Latin/Greek/Cyrillic vs. Arabic vs. CJK) and can therefore be
  recruited from fonts with different design without too much trouble,
  the design of scripts within a script family should match.
\end{sloppypar}
Thus, for Latin base fonts, we want matching, or better identical
glyph designs for Greek and Cyrillic, and, of course the IPA. 

The following 2 fonts appear to satisfy these conditions: 

\begin{itemize}
\item Linux Libertine (French renaissance antiqua)
\item FreeSerif (=Times; Baroque antiqua)
\end{itemize}

Charis SIL has very good unicode coverage for Latin and Cyrillic,
including sophisticated accent placement, but, unfortunately no Greek
(in text mode). 

\begin{itemize}
\item Charis SIL (=Charter; Linear Antiqua)
\end{itemize}

Samples:

\begin{itemize}
\item Greek 

  \begin{itemize}

  \item Monotonic
    
    Γλυκά θροεί η κουκουναριά στης ρεμματιάς το πλάι, όμως και συ,
    γιδοβοσκέ, γλυκειά φλογέρα παίζεις· δώρο σου πρέπει δεύ- τερο,
    ύστερ' από τον Πάνα.

\item Polytonic

    Ἄνδρα μοι ἔννεπε, μοῦσα, πολύτροπον, ὃς μάλα πολλὰ πλάγχθη,
    ἐπεὶ Τροίης ἱερὸν πτολίεθρον ἔπερσεν: πολλῶν δ ̓ ἀνθρώπων ἴδεν
    ἄστεα καὶ νόον ἔγνω, πολλὰ δ ̓ ὅ γ ̓ ἐν πόντῳ πάθεν ἄλγεα ὃν κατὰ
    θυμόν, ἀρνύμενος ἥν τε ψυχὴν καὶ νόστον ἑταίρων.
  \end{itemize}
  
   
 \item Cyrillic 
   
   \begin{itemize}
   \item Bulgarian: Всички хора се раждат свободни и равни по
     достойнство и права.
     
     
     
   \item Russian: Все люди рождаются свободными и равными в своем
     достоинстве и правах.
     
   \item Ukrainian:  Всі люди народжуються вільними і рівними у своїй гідності та правах.
     
   \end{itemize}

 \item IPA

   ˌɪntəˈnæʃn·l fəˈnɛtɪk ˈælfəˌbɛt
  
  
 \end{itemize}


In addition to the IPA, many languages with latin-based scripts
contain additional characters that are not merely accented variants of
existing base characters. E.g. West-African languages have capitals
for e.g. implosives, as in Hausa:

\begin{exe}
  \ex \gll Ɓarawo ya saci nama. \\
  thief \textsc{3.sg.compl} steal meat/animal\\
  \glt `The thief stole the meat.'
\end{exe}

These glyphs are typically found in section Latin Extended B. 

Unicode only caters for some precombined letters with
diacritics. Combinations without their own code position can be
produced with combining diacritics. Precombined and combining
diacritics should be optically indistinguishable. This is typically
achieved with OpenType rules. 

\begin{exe}
  \ex \gll Ɓàrāwō yā̂ sā̀ci nāmā̀. \\
  thief \textsc{3.sg.pot} steal meat/animal\\
  \glt `The thief might steal the meat.'
  \ex \gll Ɓàrāwō yā̂ sā̀ci nāmā̀. \\
  thief \textsc{3.sg.pot} steal meat/animal\\
  \glt `The thief might steal the meat.'
\end{exe}

Many fonts lack the appropriate mark-to-mark anchors for recursive
stacking of diacritics: the SIL fonts are a notable exception.  I have
created versions of FreeSerif and Linux Libertine that do support
this. Accent placement for Linux Libertine is done mostly
automatically; for FreeSerif, I heavily take advantage of existing
accent marks.



And finally, some Vietnamese: 
\begin{quotation}
  Tuyên ngôn toàn thế giớ i về nhân quyên của Liên Hợp Quốc.
  Tất cả mọi ngườ i sinh ra đều được tự do và bình đẳng về nhân và
  quyên.  Mọi con ngườ i đêu được tạo hoá ban cho ly phâm phải đối xử
  với nhau trong tình băng trí và lương tâm và cân hữu.
\end{quotation}

\section{Math}

Empirical linguistics and formal linguistics alike need good math
support. Modulo kerning (which is necessarily different in math and
text modes), multilingual text fonts should have accompanying math
fonts. Math support includes not only symbols for statistics, set
theory or logic but also stretchable operators for e.g. AVMs. 

Owing to the limited availability of unicode math fonts, it seems
necessary to rely on non-unicode LaTeX math packages, such as
Mathdesign Charter for Charis, and newtxmath for Libertine. For
FreeSerif only, there is an equally Times-based unicode math font,
i.e. TG Termes Math. 



\begin{itemize}
\item Comparison of text vs. math italics (compare character weight). 

  \textit{a}$a$ \textit{b}$b$ \textit{f}$f$

  Charter appears slightly lighter than Charis SIL, although the
  design matches.

\item Some inline maths:


\begin{exe}
  \ex
  \begin{xlist}
    \ex For any leaf type $t_1$[\textsc{mud} $\mu_1$,\textsc{morsyn}
    $\sigma$], $t_2$[\textsc{mud} $\mu_2$,\textsc{morsyn} $\sigma \wedge
    \tau$] is a morphological competitor, iff $\mu_1 \subseteq
    \mu_2$.
    
    \ex For any leaf type $t_1$ with competitor $t_2$, expand $t_1$'s
    \textsc{morsyn} $\sigma$ with the negation of $t_2$'s
    \textsc{morsyn} $\sigma \wedge \tau$: $\sigma \wedge \neg (\sigma
    \wedge \tau) \equiv \sigma \wedge \neg \tau$.
  \end{xlist}
\end{exe}
  

\item AVMs with math operators

  \begin{exe}
  \ex \label{ex:ComplCoh}
  \begin{avm}
    {\it word\/} $\rightarrow$
    \[morphs & $\@{e_1}\bigcirc\cdots\bigcirc\@{e_n}$\\
    morsyn & \@0 $(\@{m_1}\uplus\cdots\uplus\@{m_n})$\\
    rules & \< \[morphs & \@{e_1}\\mud & \@{m_1}\\ morsyn & \@0\],\ldots,
    \[morphs & \@{e_n}\\mud & \@{m_n}\\ morsyn & \@0\] \>
    \]
  \end{avm}
  


\end{exe}


\item Old-style figures (or not) in attribute names:

\begin{exe}
  \ex \begin{avm}
    \[c-cont & \[hook & \[index & \@e \\
    ltop & \@t\]\\
    rels & \<\[pred & hortative-rel\\
    lbl & \@t\\
    arg1 & \@h
    \]\>\\
    hcons & \< \@h $=_q$ \@l \>
    \]\\
    dtrs & \< \[ss\|l\|cont & \[hook & \[index & \@e \[tam & \textit{subj}\]\\
    ltop & \@l\]\\
    rels & \< ... \[arg0 & \@e\\
    lbl & \@l\] ... \>\]\] \>\]
  \end{avm}
\end{exe}

\end{itemize}

Note: Although the unicode-math package permits substitution of math
letters with glyphs from the unicode text font, this is
typographically questionable, due to incorrect metrics.   


\section{Summary}

If you want widest Unicode coverage, go for FreeSerif. Kerning is
sometimes not optimal (e.g. Test).\footnote{You may like to experiment
substituting certain character ranges with TG Termes, but, watch out
(!), there are no anchors for diacritics (yet). Of course, these may
be added by script at first, but I do not know how this could be fed into the
TeX Gyre workflow: in the long run, one would want to fine-tune anchor
positions by hand.}  
In addition to LGC you even get Ethiopic, Arabic, Hebrew
Devanagari, and lots more with an essentially Timesish design. Plus:
TG Termes Math gives you a 100\% matching unicode math font. Minus:
The FreeSans font has some kerning issues (\textsf{Test}). There are
no oldstyle figures.   

Linux Libertine has very broad unicode coverage, although only LGC +
Hebrew. The newtxmath package provides adequate math support, though not
unicode math. Plus: there are 3 weights (normal semi-bold, extra-bold),
 a display font and a nice companion sans font. Unicode coverage for
 extra bold sans is reduced, though. The font provides old-style
 figures, as well as calligraphic ligatures.  

Charis has very good general support for Latin and Cyrillic with
sophisticated diacritic placement, but no Greek. Another minus:
the Mathdesign Charter fonts are slightly too light, though one might
adjust the stem width in FontForge by a few points, and hope that this
does not mess up the metrics too much. 



As for sans serif and mono fonts with good unicode coverage, there are
the DejaVu Sans and DejaVu Sans Mono.\footnote{Some anchors for
  diacritics are present in DejaVu Sans. I shall provide a version
  soon with extensive anchors.}. There is even good
non-unicode math support via the arev math package. I am not so sure
that DejaVu goes that well with Times, though, because of their
reduced ascenders. 


\end{document}

%%% Local Variables: 
%%% mode: latex
%%% TeX-master: t
%%% End: 
